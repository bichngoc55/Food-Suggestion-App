<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Đề Xuất Món Ăn</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
      }
      #ingredients {
        width: 300px;
        padding: 8px;
        margin-right: 10px;
      }
      button {
        padding: 8px 12px;
      }
      #results {
        margin-top: 20px;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <h2>Đề Xuất Món Ăn</h2>
    <input
      id="ingredients"
      placeholder="Nhập nguyên liệu, cách nhau bởi dấu phẩy"
    />
    <button onclick="getSuggestions()">Đề Xuất</button>
    <div id="results"></div>

    <script>
      async function getSuggestions() {
        const ingredients = document
          .getElementById("ingredients")
          .value.split(",")
          .map((i) => i.trim());

        try {
          const res = await fetch("/suggest", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ ingredients }),
          });

          if (!res.ok) {
            throw new Error("Lỗi khi gửi yêu cầu đến server.");
          }

          const data = await res.json();

          if (data.suggestions && data.suggestions.length > 0) {
            document.getElementById("results").innerHTML =
              data.suggestions.join("<br>");
          } else {
            document.getElementById("results").innerHTML =
              "Không tìm thấy món phù hợp.";
          }
        } catch (err) {
          document.getElementById("results").innerHTML =
            "Đã xảy ra lỗi: " + err.message;
        }
      }
    </script>
  </body>
</html>
